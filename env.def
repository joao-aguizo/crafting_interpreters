Bootstrap: docker
From: debian:bookworm-slim

%labels
    Author Joao Aguizo
    Description Lightweight Java JDK image with JDB and GCC support
    JavaVersion OpenJDK 17

%environment
    export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
    export PATH=$JAVA_HOME/bin:$PATH

%post
    echo "Installing OpenJDK and essentials..."

    apt-get update
    apt-get install -y --no-install-recommends \
        openjdk-17-jdk-headless \
        ca-certificates \
        gdb \
        procps \
        vim \
        gcc \
        less

    apt-get clean
    rm -rf /var/lib/apt/lists/*

    echo "JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64" >> /etc/profile

%runscript
    echo "Java environment inside Singularity container"
    exec "$@"

%test
    java -version
    javac -version
    jdb -version
    gcc -v
